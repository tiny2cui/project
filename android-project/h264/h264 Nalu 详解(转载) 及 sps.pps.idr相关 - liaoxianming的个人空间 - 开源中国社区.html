<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='zh-CN' xml:lang='zh-CN' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta http-equiv="Content-Language" content="zh-CN"/>
  <meta name="robots" content="index, follow" />
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
  <title>h264 Nalu 详解(转载) 及 sps.pps.idr相关 -  liaoxianming的个人空间 - 开源中国社区</title>
      <meta name="Description" content="h264 Nalu 详解(转载) 及 sps.pps.idr相关：http://blog.csdn.net/d_l_u_f/article/details/7260772 1．引言 H.264的主要目标： 1．高的视频压缩比 ..."/>
    <link rel="stylesheet/less" href="http://my.oschina.net/aiadaniel/styles.less?ver=20140422" type="text/css" media="screen" />
  <link rel="stylesheet" href="/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
  <script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-1.3.4.pack.js?2014031702"></script>
  <script type="text/javascript" src="/js/2012/poshytip/jquery.poshytip.min.js"></script>
  <script type="text/javascript" src="/js/2011/oschina.js?ver=20121007"></script>
  <script type="text/javascript" src="/js/2012/less-1.3.0.min.js"></script>
  <script type="text/javascript" src="/js/scrolltopcontrol.js"></script>
  <script type='text/javascript' src='/js/jquery/jquery.atwho.js?ver=2013112501'></script>
  <script type="text/javascript" src="/js/ng/angular.min.js"></script>
  <script type="text/javascript" src="/js/ng/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="/js/ng/angular-resource.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/js/jquery/jquery.atwho.css" />
  <link rel="alternate" type="application/rss+xml" title="liaoxianming最新博客" href="http://my.oschina.net/aiadaniel/rss" />
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://my.oschina.net/action/xmlrpc/rsd?space=552347" />
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://my.oschina.net/action/xmlrpc/wlwmanifest?space=552347" /> 
  <style type="text/css">
    body,table,input,textarea,select {font-family:Verdana,sans-serif,宋体;}	
  </style>
  <script type="text/javascript">
  	scrolltotop.offset(100,165);
	scrolltotop.init();
  </script>
</head>
<body>
<div id="OSC_Screen">
	<style type="text/css">
    #OSC_Banner {margin: 0 auto;text-align: left;margin-bottom: 5px;height:30px;border-top:0px;}
    #OSC_Banner a {text-decoration: none;color: #fff;}
    #OSC_Banner .cs_content a {color: #080;}
    #OSC_Banner a:hover {color: #eee;}
	#OSC_Banner a.project{background-color:transparent;}
    #OSC_Banner #OSC_Channel {float: left;height:30px;}
    #OSC_Banner #OSC_Channel ul {line-height: 18px;}
    #OSC_Banner #OSC_Channel ul li.item {float: left;margin: 0 16px 0 0;line-height: 30px;}
    #OSC_Banner #OSC_Channel ul li a.hl {font-weight: bold;}
    #OSC_Banner #OSC_Userbar {float: right;	color: #ddd;line-height:30px;margin-right:10px;}
    #OSC_Banner #OSC_Userbar em {font-style: normal;color: #fff;margin-right: 2px;}
	/*下拉菜单*/
	#OSC_Banner .control_select {position: relative;background: url('/img/down3.gif') no-repeat right 14px;padding-right: 8px;cursor: pointer;height: 25px;display: inline-block;z-index: 1001;}
	#OSC_Banner .control_select a {position: relative;}
	#OSC_Banner .control_select ul.cs_content {display: none;text-align: left;position: absolute;left: 0px;top: 25px;width: 110px;z-index: 9999;background: white;padding: 5px 0 2px 5px;font-size: 9pt;list-style-type: none;}
	#OSC_Banner .control_select ul.cs_content li {border: 0;height: 16px;line-height: 16px;margin-bottom: 8px;}
	#OSC_Banner .control_select ul.cs_content li a:hover {font-weight: bold;background: #fff;color: #A00}
	#OSC_Banner .group_msg_count {display: inline-block;	padding: 2px;border-radius: 3px;background-color: RGB(255, 113, 112);color: white;font-size: 12px;height: 10px;text-align: center;
		line-height: 10px;min-width: 15px;box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-webkit-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-moz-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);}
	.tip-yellowsimple .tip-arrow-top{left:80%;}
</style>
<script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};</script>
<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript" src="/js/channel.js?2014022501"></script>
<div id='OSC_Banner'>
        <div id="OSC_Channel" style="float:left;margin-left:10px;">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class='home'>首页</a></li>        	<li class="item control_select"><a href="http://www.oschina.net/project" class='project'>开源项目</a>
				<ul class="cs_content">					
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class='question'>讨论区</a>				
				<ul class="cs_content">					
                	<li><a href="http://www.oschina.net/question?catalog=1"> 技术问答 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2"> 技术分享 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3"> IT大杂烩 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100"> 职业生涯 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4"> 站务/建议 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/alipay"> 支付宝专区 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/hardware"> 开源硬件专区 &raquo; </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class='code'>代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class='blog'>博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class='tran'>翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class='news'>资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class='mobile'>移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp">Windows Phone</a></li>
				</ul>
			</li>
        	<li class="item t_job"><a href="http://www.oschina.net/job" class='job'>招聘</a></li>
									            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Faiadaniel%2Fblog%2F100290">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
    				</div>
		<div class='clear'></div>
</div>	<div id="OSC_Topbar">
		<div id="VisitorInfo">
		当前访客身份：
				游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Faiadaniel">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
				
		</div>
		<div id="SearchBar">
    		<form action="http://www.oschina.net/search">
				<input type='hidden' name='user' value='552347'/>
																<span class="ipt f_l">
    			<input type='text' id='txt_q' name='q' class='SERACH' value='在 30679 款开源软件中搜索' onblur="(this.value=='')?this.value='在 30679 款开源软件中搜索':this.value" onfocus="if(this.value=='在 30679 款开源软件中搜索'){this.value='';};this.select();"/>
				</span>
				                <div class="search-by selectbox">
    				<span class="hide">
    				<select name='scope'>					
                        <option value='project' selected>软件</option>
                        <option value='code'>代码</option>
                        <option value='bbs'>讨论区</option>
                        <option value='news'>新闻</option>
                        <option value='blog'>博客</option>
    				</select>
    				</span>
                  <div class="search_on" id="search-item"><span class="text">软件</span></div>
                  <ul class="search_list">
                     <li class="search-item"><a href="#1">软件</a></li>
                     <li><a href="#2">代码</a></li>
                     <li><a href="#3">讨论区</a></li>
                     <li><a href="#4">新闻</a></li>
                     <li><a href="#5">博客</a></li>
                  </ul>
                </div>
				<input type='submit' value='搜索' class='bnt f_r'/>			
    		</form>
		</div>
		<div class='clear'></div>
	</div>
	<div id="OSC_Content">	
<style>
	.icon{width:20px;height:20px;vertical-align: middle;display:inline-block;font-size:14px;text-align:center;color:#FFF;font-weight: bold;}
	.catalogs{padding:0px;margin:0px;position:relative;display:inline-block;}
    .catalogs ul{padding:0px;margin:0px;position:absolute;left:-8px;top: -21px;clear:left;width:120px;height:14px;overflow:hidden;background:#FFF;z-index:1000;padding:5px;border:1px solid #FFF;}
    .catalogs ul:hover{height:auto;background:#fff;border:1px solid #4466bb;}
    .catalogs ul li a:hover{color:#A00;font-weight: bold;}
	.BlogStat a:hover{background:#FFF;}
	.BlogStat{font-size:12px;line-height:20px;}
	.BlogStat .g{color:#40AA53}
	.BlogTags{margin-top:8px;}
		.BlogAbstracts{}
</style>
<div id='SpaceLeft'>
<div class='Owner'>
	    <a href="http://my.oschina.net/aiadaniel" class='Img'><img src="http://static.oschina.net/uploads/user/276/552347_100.jpg" align="absmiddle" alt="liaoxianming" title="liaoxianming" class="LargePortrait"/></a>
    <span class='U'>
                    <a href="http://my.oschina.net/aiadaniel" class='Name' title='男'>liaoxianming</a>
        		<span class='opts'>
			<img src="/img/2012/men.png" align='absmiddle' title='男'/>
        			<script type='text/javascript'>
var nologin = "<a href='javascript:_follow_nologin()' title='成为TA的粉丝'>关注此人</a>"
var follow0 = "<a href='javascript:_follow_user(552347,true)' title='成为TA的粉丝'>关注此人</a>";
var follow1 = "已关注 | <a href='javascript:_follow_user(552347,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow2 = "互相关注 | <a href='javascript:_follow_user(552347,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow4 = "<a href='javascript:_follow_user(552347,true)' title='成为TA的粉丝'>+关注此人</a>";

document.write("<span id='_follow_552347_action_'>");
	document.write(nologin);
document.write("</span>");

function _follow_nologin(){
	if(confirm('必须登录后才能关注，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+location.href;
	}
}

function _follow_user(uid, follow){
	var action = follow?"/action/user/follow":"/action/user/unfollow";
	ajax_post(action,"id="+uid+"&user=${g_user.id}",function(result){
		var act = $('#_follow_552347_action_');
		if(result == '0')
			_follow_nologin();
		else if(result == '1')
			act.html(follow0);
		else if(result == '2')
			act.html(follow1);
		else if(result == '3')
			act.html(follow2);
		else if(result == '4')
			act.html(follow4);
	});
}
</script>				</span>
    </span>
    <div class='clear'></div>
    <div class='stat'>
    	<a href="http://my.oschina.net/aiadaniel/fellow">关注<span>(0)</span></a>
    	<a href="http://my.oschina.net/aiadaniel/fans">粉丝<span>(2)</span></a>
    	<a href="http://www.oschina.net/question/3307_20931" title="查看OSCHINA积分规则">积分<span>(1)</span></a>
                       
    </div>
</div>    <style type="text/css">
    #Medals {margin-left: 3px; height: 28px;}
    #Medals li {float: left;margin: 3px 5px;line-height: 24px;}
    .tip-yellowsimple-medal {
        z-index: 1000;
        text-align: left;
        border: 1px solid #E6DEB6;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        padding: 6px 8px;
        min-width: 50px;
        max-width: 300px;
        color: #000;
        background-color: #FFFEF2;
    }
	.tip-yellowsimple-medal .tip-arrow-left {
		visibility: inherit;
        margin-top: -4px;
        margin-left: -6px;
        top: 15px;
        left: 0;
        width: 6px;
        height: 9px;
        background: url(/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple_arrows.gif) no-repeat -27px 0;
	}
	div.tip-yellowsimple-medal div.tip-arrow {
        visibility: hidden;
        position: absolute;
        overflow: hidden;
        font: 1px/1px sans-serif;
	}
</style>
<script type="text/javascript">
    $(function(){
        $('#Medals a').poshytip({
            className: 'tip-yellowsimple-medal',
            alignTo: 'target',
            alignX: 'right',
            alignY: 'bottom',
            offsetX: 10,
            offsetY: -30,
            fade: false,
            slide: false,
            content: function(updateCallback) {
                ajax_get("/action/ajax/get_medal_detail?owner=552347&medalId="+$(this).attr('medalId')+"&time="+new Date().getTime(),false,function(html){
                    updateCallback(html);
                    if($('.tip-arrow.tip-arrow-left').last().offset().top >= temp.offset().top) {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "15px"});
                    }
                    else {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "135px"});
                    }
                });
                temp = $(this);
                return "<div style='height:100px;'>Loading...</div>";
            }
        });
    });
</script>
<style>
#MyResume textarea {width:170px;height:60px;font-size:9pt;}
</style>
<div class='Resume' id='MyResume'>
我不懒，谢了</div>

<div class='Opts clearfix'>
	<a href="javascript:sendmsg(552347, 0)" class='a1 sendmsg'><i>.</i><span>发送留言</span></a>
	<a href="http://www.oschina.net/question/ask?user=552347" class='a2 ask'><i>.</i><span>请教问题</span></a>
</div><div class="Mod" id="BlogCatalogs">
  <strong> 博客分类</strong>
  <ul>
	    	<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=194037">c基础补充</a><span>(4)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=250462">iphone</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=174354">android之路</a><span>(35)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=184064">java基础</a><span>(10)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=174356">好吧，科普</a><span>(8)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=282563">c++</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/aiadaniel/blog?catalog=174355">日常记录</a><span>(0)</span></li>
	  </ul>
</div><div class="Mod" id="HotBlogs">
  <strong>阅读排行</strong>
  <ol>
			<li><a href="http://my.oschina.net/aiadaniel/blog/100290">1. h264 Nalu 详解(转载) 及 sps.pps.idr相关</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/64161">2. Android 颜色选择器(ColorPicker)</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/59979">3. Android应用程序级全局变量Application</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/58226">4. listview加载性能优化ViewHolder</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/64936">5. list 去重</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/64146">6. 自定义checkbox</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/59674">7. android3.0 widget</a></li>
				<li><a href="http://my.oschina.net/aiadaniel/blog/97846">8. 音频变速开源框架SoundTouch</a></li>
		  </ol>
</div>
<div class="Mod" id="BlogReplies">
  <strong> 最新评论</strong>  
      <ul>
		<li>
		<a href="http://my.oschina.net/u/1162099">@dbydc</a>：好
		<a href="/action/tweet/go?obj=276395140&type=18&user=1162099">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/208081">@52java</a>：List list = new ArrayList(); list.add(1); lis...
		<a href="/action/tweet/go?obj=268608020&type=18&user=208081">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/dourgulf">@子达如何</a>：没看出来“可以使去重运算较少到list.size()次 ...
		<a href="/action/tweet/go?obj=268290218&type=18&user=137852">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/aiadaniel">@liaoxianming</a>：备注：DatagramSocket用于UDP通讯中...
		<a href="/action/tweet/go?obj=267704599&type=18&user=552347">查看&raquo;</a>
	</li>
	  </ul>
  </div>
<div class='Mod' id='Stat'>
<strong>访客统计</strong>
<ul>
	<li><label>今日访问：</label>8</li>
    <li><label>昨日访问：</label>27</li>
    <li><label>本周访问：</label>35</li>
    <li><label>本月访问：</label>433</li>
    <li><label>所有访问：</label>10033</li>
</ul>
</div></div>

<div class='SpaceList'>
	<div class='TopBar'>
    	<div class='NavPath'>		
    		<a href='http://my.oschina.net/aiadaniel'>空间</a> &raquo; <a href='http://my.oschina.net/aiadaniel/blog'>博客</a>			
			&raquo; 
						<span class="catalogs">
    			<ul>
    										<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=174356">好吧，科普</a></li>
					        			        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=194037">c基础补充</a></li>    				        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=250462">iphone</a></li>    				        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=174354">android之路</a></li>    				        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=184064">java基础</a></li>    				        				    				        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=282563">c++</a></li>    				        				<li ><a href="http://my.oschina.net/aiadaniel/blog?catalog=174355">日常记录</a></li>    				    				        				<li><a href="http://my.oschina.net/aiadaniel/blog">所有分类</a></li>
    				    			</ul>
			</span>
    	</div>
	</div>
	
    	<div class='BlogEntity'>		
      <div class='BlogTitle'>
        <h1><span class="icon" style="background:#44ac57;"  title="原创博客">原</span>															h264 Nalu 详解(转载) 及 sps.pps.idr相关</h1>
        <div class='BlogStat'>
    		    		发表于1年前(2013-01-06 12:51)&nbsp;&nbsp;
    		阅读（<span class="g">1810</span>）&nbsp;|&nbsp;评论（<a href="#comments"><span class="g">0</span></a>）
    					    	    <span class='admin'>
				<style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type='text/javascript'>
var favor_add = "<a href='javascript:add_to_favor(100290,3)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(100290,3)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=3'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id='p_attention_count'>0</em>人收藏此文章,
<span id='attention_it'>
	<script type='text/javascript'>document.write(favor_add);</script>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+100290+"&type="+3,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>			</span>
			    	</div>
		<div class="tvote" onclick="vote(100290)" title="都有0个人赞过了，你也来赞一下吧！不会扣积分哦！"><em class="vote">赞</em><em class="num vote_count">0</em></div>
      </div>
	  
	  <a  name="kindeditor" ></a>
	  	  	  <div class='BlogContent'><p> http://blog.csdn.net/d_l_u_f/article/details/7260772 </p> 
<p> 1．引言 </p> 
<p> H.264的主要目标： </p> 
<p> 1．高的视频压缩比 </p> 
<p> 2．良好的网络亲和性 </p> 
<p> 解决方案： </p> 
<p> VCL&nbsp; video coding layer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 视频编码层 </p> 
<p> NAL&nbsp; network abstraction layer&nbsp; 网络提取层 </p> 
<p> <span style="color:#006600;">VCL</span>：核心算法引擎，块，宏块及片的语法级别的定义 </p> 
<p> <span style="color:#006600;">NAL</span>：片级以上的语法级别（如序列参数集和图像参数集），同时支持以下功能：独立片解码，起始码唯一保证，SEI以及流格式编码数据传送 </p> 
<p> <span style="color:#EE33EE;">VCL设计目标</span>：尽可能地独立于网络的情况下进行高效的编解码 </p> 
<p> <span style="color:#EE33EE;">NAL设计目标</span>：根据不同的网络把数据打包成相应的格式，将VCL产生的比特字符串适配到各种各样的网络和多元环境中。 </p> 
<p> <br /> </p> 
<p> <br /> </p> 
<p> NALU头结构：NALU类型(5bit)、重要性指示位(2bit)、禁止位(1bit)。 </p> 
<p> NALU类型：1～12由H.264使用，24～31由H.264以外的应用使用。 </p> 
<p> 重要性指示：标志该NAL单元用于重建时的重要性，值越大，越重要。 </p> 
<p> 禁止位：网络发现NAL单元有比特错误时可设置该比特为1，以便接收方丢掉该单元。 </p> 
<p> 2．NAL语法语义 </p> 
<p> NAL层句法： </p> 
<p> 在编码器输出的码流中，数据的基本单元是句法元素。 </p> 
<p> 句法表征句法元素的组织结构。 </p> 
<p> 语义阐述句法元素的具体含义。 </p> 
<p> 分组都有头部，解码器可以很方便的检测出NAL的分界，依次取出NAL进行解码。 </p> 
<p> 但为了节省码流，H.264没有另外在NAL的头部设立表示起始位置的句法元素。 </p> 
<p> 如果编码数据是存储在介质上的，由于NAL是依次紧密相连的，解码器就无法在数据流中分辨出每个NAL的起始位置和终止位置。 </p> 
<p> 解决方案：在每个NAL前添加起始码：0X000001 </p> 
<p> 在某些类型的介质上，为了寻址的方便，要求数据流在长度上对齐，或某个常数的整数倍。所以在起始码前添加若干字节的0来填充。 </p> 
<p> 检测NAL的开始： </p> 
<p> 0X000001和0X000000 </p> 
<p> 我们必须考虑当NAL内部出现了0X000001和0X000000 </p> 
<p> 解决方案： </p> 
<p> H.264提出了“防止竞争”机制： </p> 
<p> 0X000000——0X00000300 </p> 
<p> 0X000001——0X00000301 </p> 
<p> 0X000002——0X00000302 </p> 
<p> 0X000003——0X00000303 </p> 
<p> 为此，我们可以知道： </p> 
<p> 在NAL单元中，下面的三字节序列不应在任何字节对齐的位置出现 </p> 
<p> 0X000000 </p> 
<p> 0X000001 </p> 
<p> 0X000002 </p> 
<p> Forbidden_zero_bit =0; </p> 
<p> Nal_ref_idc：表示NAL的优先级。0～3，取值越大，表示当前NAL越重要，需要优先受到保护。如果当前NAL是属于参考帧的片，或是序列参数集，或是图像参数集这些重要的单位时，本句法元素必需大于0。 </p> 
<p> Nal_unit_type：当前NAL 单元的类型 </p> 
<p> 3．H.264的NAL层处理 </p> 
<p> 结构示意图： </p> 
<p> NAL以NALU（NAL unit）为单元来支持编码数据在基于分组交换技术网络中传输。 </p> 
<p> 它定义了符合传输层或存储介质要求的数据格式，同时给出头信息，从而提供了视频编码和外部世界的接口。 </p> 
<p> NALU：定义了可用于基于分组和基于比特流系统的基本格式 </p> 
<p> RTP封装：只针对基于NAL单元的本地NAL接口。 </p> 
<p> 三种不同的数据形式： </p> 
<p> SODB　数据比特串－－＞最原始的编码数据 </p> 
<p> RBSP　原始字节序列载荷－－＞在SODB的后面填加了结尾比特（RBSP trailing bits　一个bit“1”）若干比特“0”,以便字节对齐 </p> 
<p> EBSP　扩展字节序列载荷--&gt;在RBSP基础上填加了仿校验字节（0X03）它的原因是：　在NALU加到Annexb上时，需要添加每组NALU之前的开始码StartCodePrefix,如果该NALU对应的slice为一帧的开始则用4位字节表示，ox00000001,否则用3位字节表示ox000001.为了使NALU主体中不包括与开始码相冲突的，在编码时，每遇到两个字节连续为0，就插入一个字节的0x03。解码时将0x03去掉。也称为脱壳操作 </p> 
<p> 处理过程： </p> 
<p> 1．&nbsp; 将VCL层输出的SODB封装成nal_unit， Nal_unit是一个通用封装格式，可以适用于有序字节流方式和IP包交换方式。 </p> 
<p> 2．&nbsp; 针对不同的传送网络（电路交换|包交换），将nal_unit 封装成针对不同网络的封装格式。 </p> 
<p> &nbsp; </p> 
<p> 第一步的具体过程： </p> 
<p> VCL层输出的比特流SODB（String Of Data Bits），到nal_unit之间，经过了以下三步处理： </p> 
<p> 1.SODB字节对齐处理后封装成RBSP（Raw Byte Sequence Payload）。 </p> 
<p> 2.为防止RBSP的字节流与有序字节流传送方式下的SCP（start_code_prefix_one_3bytes，0x000001）出现字节竞争情形，循环检测RBSP前三个字节，在出现字节竞争时在第三字节前加入emulation_prevention_three_byte （0x03），具体方法： </p> 
<p> nal_unit( NumBytesInNALunit ) { </p> 
<p> forbidden_zero_bit </p> 
<p> nal_ref_idc </p> 
<p> nal_unit_type </p> 
<p> NumBytesInRBSP = 0 </p> 
<p> for( i = 1; i &lt; NumBytesInNALunit; i++ ) { </p> 
<p> if( i + 2 &lt; NumBytesInNALunit &amp;&amp; next_bits( 24 ) = = 0x000003 ) { </p> 
<p> rbsp_byte[ NumBytesInRBSP++ ] </p> 
<p> rbsp_byte[ NumBytesInRBSP++ ] </p> 
<p> i += 2 </p> 
<p> emulation_prevention_three_byte /* equal to 0x03 */ </p> 
<p> } else </p> 
<p> rbsp_byte[ NumBytesInRBSP++ ] </p> 
<p> } </p> 
<p> } </p> 
<p> 3. 防字节竞争处理后的RBSP再加一个字节的header(forbidden_zero_bit+ nal_ref_idc+ nal_unit_type)，封装成nal_unit. </p> 
<p> 第二步的具体过程： </p> 
<p> &nbsp; </p> 
<p> case1：有序字节流的封装 </p> 
<p> &nbsp; </p> 
<p> byte_stream_nal_unit( NumBytesInNALunit ) { </p> 
<p> while( next_bits( 24 ) != 0x000001 ) </p> 
<p> zero_byte /* equal to 0x00 */ </p> 
<p> if( more_data_in_byte_stream( ) ) { </p> 
<p> start_code_prefix_one_3bytes /* equal to 0x000001 */ nal_unit( NumBytesInNALunit ) </p> 
<p> } </p> 
<p> } </p> 
<p> 类似H.320和MPEG-2/H.222.0等传输系统，传输NAL作为有序连续字节或比特流，同时要依靠数据本身识别NAL单元边界。在这样的应用系统中，H.264/AVC规范定义了字节流格式，每个NAL单元前面增加3个字节的前缀，即同步字节。在比特流应用中，每个图像需要增加一个附加字节作为边界定位。还有一种可选特性，在字节流中增加附加数据，用做扩充发送数据量，能实现快速边界定位，恢复同步 </p> 
<p> Case2：IP网络的RTP打包封装 </p> 
<p> 分组打包的规则 </p> 
<p> &nbsp;&nbsp;&nbsp; (1)额外开销要少，使MTU尺寸在100～64k字节范围都可以； </p> 
<p> &nbsp;&nbsp;&nbsp; (2)不用对分组内的数据解码就可以判别该分组的重要性； </p> 
<p> &nbsp;&nbsp;&nbsp; (3)载荷规范应当保证不用解码就可识别由于其他的比特丢失而造成的分组不可解码； </p> 
<p> &nbsp;&nbsp;&nbsp; (4)支持将NALU分割成多个RTP分组； </p> 
<p> &nbsp; 　(5)支持将多个NALU汇集在一个RTP分组中。 </p> 
<p> &nbsp;&nbsp;&nbsp; RTP的头标可以是NALU的头标，并可以实现以上的打包规则。 </p> 
<p> &nbsp;&nbsp;&nbsp; 一个RTP分组里放入一个NALU，将NALU(包括同时作为载荷头标的NALU头)放入RTP的载荷中，设置RTP头标值。为了避免IP层对大分组的再一次分割，片分组的大小一般都要小于MTU尺寸。由于包传送的路径不同，解码端要重新对片分组排序，RTP包含的次序信息可以用来解决这一问题。 </p> 
<p> &nbsp;NALU分割 </p> 
<p> &nbsp;&nbsp;&nbsp; 对于预先已经编码的内容，NALU可能大于MTU尺寸的限制。虽然IP层的分割可以使数据块小于64千字节，但无法在应用层实现保护，从而降低了非等重保护方案的效果。由于UDP数据包小于64千字节，而且一个片的长度对某些应用场合来说太小，所以应用层打包是RTP打包方案的一部分。 </p> 
<p> &nbsp;&nbsp;&nbsp; 新的讨论方案(IETF)应当符合以下特征： </p> 
<p> &nbsp;&nbsp;&nbsp; (1)NALU的分块以按RTP次序号升序传输； </p> 
<p> &nbsp;&nbsp;&nbsp; (2)能够标记第一个和最后一个NALU分块； </p> 
<p> &nbsp;&nbsp;&nbsp; (3)可以检测丢失的分块。 </p> 
<p> &nbsp;NALU合并 </p> 
<p> &nbsp;&nbsp;&nbsp; 一些NALU如SEI、参数集等非常小，将它们合并在一起有利于减少头标开销。已有两种集合分组： </p> 
<p> &nbsp;&nbsp;&nbsp; (1)单一时间集合分组(STAP)，按时间戳进行组合； </p> 
<p> &nbsp;&nbsp;&nbsp; (2)多时间集合分组(MTAP)，不同时间戳也可以组合。 </p> 
<p> NAL规范视频数据的格式，主要是提供头部信息，以适合各种媒体的传输和存储。NAL支持各种网络，包括： </p> 
<p> 1．任何使用RTP/IP协议的实时有线和无线Internet 服务 </p> 
<p> 2．作为MP4文件存储和多媒体信息文件服务 </p> 
<p> 3．MPEG-2系统 </p> 
<p> 4．其它网 </p> 
<p> NAL规定一种通用的格式，既适合面向包传输，也适合流传送。实际上，包传输和流传输的方式是相同的，不同之处是传输前面增加了一个起始码前缀 </p> 
<p> 在类似Internet/RTP面向包传送协议系统中，包结构中包含包边界识别字节，在这种情况下，不需要同步字节。 </p> 
<p> NAL单元分为VCL和非VCL两种 </p> 
<p> VCL NAL单元包含视频图像采样信息， </p> 
<p> 非VCL包含各种有关的附加信息，例如参数集（头部信息，应用到大量的VCL NAL单元）、提高性能的附加信息、定时信息等 </p> 
<p> 参数集： </p> 
<p> 参数集是很少变化的信息，用于大量VCL NAL单元的解码，分为两种类型： </p> 
<p> 1．序列参数集sps，作用于一串连续的视频图像，即视频序列。 </p> 
<p> &nbsp;&nbsp; 两个IDR图像之间为序列参数集。IDR和I帧的区别见下面。 </p> 
<p> 2．&nbsp; 图像参数集pps，作用于视频序列中的一个或多个个别的图像 </p> 
<p> 序列和图像参数集机制，减少了重复参数的传送，每个VCL NAL单元包含一个标识，指 </p> 
<p> 向有关的图像参数集，每个图像参数集包含一个标识，指向有关的序列参数集的内容 </p> 
<p> 因此，只用少数的指针信息，引用大量的参数，大大减少每个VCL NAL单元重复传送的信息。 </p> 
<p> 序列和图像参数集可以在发送VCL NAL单元以前发送，并且重复传送，大大提高纠错能力。序列和图像参数集可以在“带内”，也可以用更为可靠的其他“带外”通道传送。 </p> 
<p> 存储单元： </p> 
<p> 一组指定格式的NAL单元称为存储单元，每个存储单元对应一个图像。每个存储单元包含一组VCL NAL单元，组成一个主编码图像，VCL NAL单元由表示视频图像采样的像条所组成。存储单元前面可以加一个前缀，分界存储单元，附加增强信息（SEI）（如图像定时信息）也可以放在主编码图像的前面。主编码图像后附加的VCL NAL单元，包含同一图像的冗余表示，称为冗余编码图像，当主编码图像数据丢失或损坏时，可用冗余编码图像解码。 </p> 
<p> 编码视频序列 </p> 
<p> 一个编码视频序列由一串连续的存储单元组成，使用同一序列参数集。每个视频序列可独立解码。编码序列的开始是即时刷新存储单元（IDR）。IDR是一个I帧图像，表示后面的图像不用参考以前的图像。一个NAL单元流可包含一个或更多的编码视频序列。 </p> 
<p> RTP协议： </p> 
<p> 实时传输协议（Real-time Transport Protocol，RTP）是在Internet上处理多媒体数据流的一种网络协议，利用它能够在一对一（单播）或者一对多（multicast，多播）的网络环境中实现传流媒体数据的实时传输。RTP通常使用UDP来进行多媒体数据的传输，但如果需要的话可以使用TCP或者ATM等其它协议，整个RTP协议由两个密切相关的部分组成：RTP数据协议和RTP控制协议。实时流协议（Real Time Streaming Protocol， RTSP）最早由Real Networks和Netscape公司共同提出，它位于RTP和RTCP之上，其目的是希望通过IP网络有效地传输多媒体数据。 </p> 
<p> RTP数据协议 </p> 
<p> RTP数据协议负责对流媒体数据进行封包并实现媒体流的实时传输，每一个RTP数据报都由头部（Header）和负载（Payload）两个部分组成，其中头部前12个字节的含义是固定的，而负载则可以是音频或者视频数据。RTP数据报的头部格式如图1所示： </p> 
<p> 其中比较重要的几个域及其意义如下： </p> 
<p> CSRC记数（CC）　　表示CSRC标识的数目。CSRC标识紧跟在RTP固定头部之后，用来表示RTP数据报的来源，RTP协议允许在同一个会话中存在多个数据源，它们可以通过RTP混合器合并为一个数据源。例如，可以产生一个CSRC列表来表示一个电话会议，该会议通过一个RTP混合器将所有讲话者的语音数据组合为一个RTP数据源。 </p> 
<p> &nbsp;负载类型（PT）　　标明RTP负载的格式，包括所采用的编码算法、采样频率、承载通道等。例如，类型2表明该RTP数据包中承载的是用ITU G.721算法编码的语音数据，采样频率为8000Hz，并且采用单声道。 </p> 
<p> &nbsp; 序列号　　用来为接收方提供探测数据丢失的方法，但如何处理丢失的数据则是应用程序自己的事情，RTP协议本身并不负责数据的重传。 </p> 
<p> &nbsp; 时间戳　记录了负载中第一个字节的采样时间，接收方能够时间戳能够确定数据的到达是否受到了延迟抖动的影响，但具体如何来补偿延迟抖动则是应用程序自己的事情。从RTP数据报的格式不难看出，它包含了传输媒体的类型、格式、序列号、时间戳以及是否有附加数据等信息，这些都为实时的流媒体传输提供了相应的基础。RTP协议的目的是提供实时数据（如交互式的音频和视频）的端到端传输服务，因此在RTP中没有连接的概念，它可以建立在底层的面向连接或面向非连接的传输协议之上；RTP也不依赖于特别的网络地址格式，而仅仅只需要底层传输协议支持组帧（Framing）和分段（Segmentation）就足够了；另外RTP本身还不提供任何可靠性机制，这些都要由传输协议或者应用程序自己来保证。在典型的应用场合下，RTP一般是在传输协议之上作为应用程序的一部分加以实现的，如图2所示： </p> 
<p> RTCP控制协议 </p> 
<p> &nbsp;RTCP控制协议需要与RTP数据协议一起配合使用，当应用程序启动一个RTP会话时将同时占用两个端口，分别供RTP和RTCP使用。RTP本身并不能为按序传输数据包提供可靠的保证，也不提供流量控制和拥塞控制，这些都由RTCP来负责完成。通常RTCP会采用与RTP相同的分发机制，向会话中的所有成员周期性地发送控制信息，应用程序通过接收这些数据，从中获取会话参与者的相关资料，以及网络状况、分组丢失概率等反馈信息，从而能够对服务质量进行控制或者对网络状况进行诊断。 </p> 
<p> RTCP协议的功能是通过不同的RTCP数据报来实现的，主要有如下几种类型： </p> 
<p> SR　　发送端报告，所谓发送端是指发出RTP数据报的应用程序或者终端，发送端同时也可以是接收端。 </p> 
<p> RR　　接收端报告，所谓接收端是指仅接收但不发送RTP数据报的应用程序或者终端。 </p> 
<p> SDES　　源描述，主要功能是作为会话成员有关标识信息的载体，如用户名、邮件地址、电话号码等，此外还具有向会话成员传达会话控制信息的功能。 </p> 
<p> BYE　　通知离开，主要功能是指示某一个或者几个源不再有效，即通知会话中的其他成员自己将退出会话。 </p> 
<p> APP　　由应用程序自己定义，解决了RTCP的扩展性问题，并且为协议的实现者提供了很大的灵活性。 </p> 
<p> RTCP数据报携带有服务质量监控的必要信息，能够对服务质量进行动态的调整，并能够对网络拥塞进行有效的控制。由于RTCP数据报采用的是多播方式，因此会话中的所有成员都可以通过RTCP数据报返回的控制信息，来了解其他参与者的当前情况。 </p> 
<p> 在一个典型的应用场合下，发送媒体流的应用程序将周期性地产生发送端报告SR，该RTCP数据报含有不同媒体流间的同步信息，以及已经发送的数据报和字节的计数，接收端根据这些信息可以估计出实际的数据传输速率。另一方面，接收端会向所有已知的发送端发送接收端报告RR，该RTCP数据报含有已接收数据报的最大序列号、丢失的数据报数目、延时抖动和时间戳等重要信息，发送端应用根据这些信息可以估计出往返时延，并且可以根据数据报丢失概率和时延抖动情况动态调整发送速率，以改善网络拥塞状况，或者根据网络状况平滑地调整应用程序的服务质量。 </p> 
<p> RTSP实时流协议 </p> 
<p> 作为一个应用层协议，RTSP提供了一个可供扩展的框架，它的意义在于使得实时流媒体数据的受控和点播变得可能。总的说来，RTSP是一个流媒体表示协议，主要用来控制具有实时特性的数据发送，但它本身并不传输数据，而是必须依赖于下层传输协议所提供的某些服务。RTSP可以对流媒体提供诸如播放、暂停、快进等操作，它负责定义具体的控制消息、操作方法、状态码等，此外还描述了与RTP间的交互操作。 </p> 
<p> RTSP在制定时较多地参考了HTTP/1.1协议，甚至许多描述与HTTP/1.1完全相同。RTSP之所以特意使用与HTTP/1.1类似的语法和操作，在很大程度上是为了兼容现有的Web基础结构，正因如此，HTTP/1.1的扩展机制大都可以直接引入到RTSP中。 </p> 
<p> 由RTSP控制的媒体流集合可以用表示描述（Presentation Description）来定义，所谓表示是指流媒体服务器提供给客户机的一个或者多个媒体流的集合，而表示描述则包含了一个表示中各个媒体流的相关信息，如数据编码/解码算法、网络地址、媒体流的内容等。 </p> 
<p> 虽然RTSP服务器同样也使用标识符来区别每一流连接会话（Session），但RTSP连接并没有被绑定到传输层连接（如TCP等），也就是说在整个RTSP连接期间，RTSP用户可打开或者关闭多个对RTSP服务器的可靠传输连接以发出RTSP 请求。此外，RTSP连接也可以基于面向无连接的传输协议（如UDP等）。 </p> 
<p> RTSP协议目前支持以下操作： </p> 
<p> 检索媒体　　允许用户通过HTTP或者其它方法向媒体服务器提交一个表示描述。如表示是组播的，则表示描述就包含用于该媒体流的组播地址和端口号；如果表示是单播的，&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 为了安全在表示描述中应该只提供目的地址。 </p> 
<p> 邀请加入　　媒体服务器可以被邀请参加正在进行的会议，或者在表示中回放媒体，或者在表示中录制全部媒体或其子集，非常适合于分布式教学。 </p> 
<p> 添加媒体　　通知用户新加入的可利用媒体流，这对现场讲座来讲显得尤其有用。与HTTP/1.1类似，RTSP请求也可以交由代理、通道或者缓存来进行处理。 </p> 
<p> 3． JM86中的处理 </p> 
<p> 涉及的函数： </p> 
<p> 流程图： </p> 
<p> &nbsp; </p> 
<p> I帧和IDR帧的区别： </p> 
<p> 1．&nbsp; 在 H.264 中 I 帧并不具有随机访问的能力，这个功能由 IDR 承担。以前的标准中由 I 帧承担。 </p> 
<p> 2．&nbsp; IDR 会导致 DPB （参考帧列表——这是关键所在）清空，而 I 不会。 </p> 
<p> 3．&nbsp; I和IDR帧其实都是I帧,都是使用帧内预测的。但是IDR帧的作用是立刻刷新,使错误不致传播,从IDR帧开始,重新算一个新的序列开始编码。 </p> 
<p> 4．&nbsp; IDR图像一定是I图像，但I图像不一定是IDR图像。一个序列中可以有很多的I图像，I图像之后的图像可以引用I图像之间的图像做运动参考。 </p> 
<p> <br /> </p> 
<p> <br /> </p> 
<p> sps.pps.idr相关： </p> 
<p> http://www.rosoo.net/a/201110/15236.html </p></div>
      	      	<div class='BlogShare'>
    	
		<strong>分享到：</strong>
		<a class="share_sina" title="分享到新浪微博" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','h264 Nalu 详解(转载) 及 sps.pps.idr相关: http://blog.csdn.net/d_l_u_f/article/details/7260772 1．引言 H.264的主要目标： 1．高的视频压缩比 2．良好的网络亲和性 解决方案： VCL  video coding layer   ...','','utf-8'));">
			<img src="/img/sinaweibo_fb1.png" height="29">
		</a>
		<a class="share_qq" title="分享到腾讯微博" href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&amp;appkey=96f54f97c4de46e393c4835a266207f4&amp;site=&amp;title='+encodeURIComponent(document.title)+encodeURIComponent(': http://blog.csdn.net/d_l_u_f/article/details/7260772 1．引言 H.264的主要目标： 1．高的视频压缩比 2．良好的网络亲和性 解决方案： VCL  video coding layer   ...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())">
			<img src="/img/tencent_weibo_fb.jpg" height="30">
		</a>
    	<span class='BlogVote' onclick="vote(100290)" title="都有0个人赞过了，你也来赞一下吧！不会扣积分哦！">
			<span class="num vote_count" >0</span><span class="vote" >赞</span>
		</span>
	</div>
      
      <div class='BlogCopyright'>		
	  		声明：OSCHINA 博客文章版权属于作者，受法律保护。未经作者同意不得转载。
	  	  </div>
	  	  
      <div class='BlogLinks'>
    	<ul>
                <li class='prev'><a href="http://my.oschina.net/aiadaniel/blog/100184" title="上一篇：Android Parcelable和Serializable的区别(转载)">&laquo; 上一篇</a></li>        <li class='next'><a href="http://my.oschina.net/aiadaniel/blog/100294" title="下一篇：x264_param_t注解（转载）">下一篇 &raquo;</a></li>    	</ul>
				<p style='margin:10px 0 0 0;font-weight:bold;color:#A00;text-decoration:none;'>开源中国-程序员在线工具：<a href="http://www.ostools.net/apidocs" style="text-decoration:none;">API文档大全(120+)</a> <a href="http://runjs.cn" style="text-decoration:none;" target='_blank'>JS在线编辑演示</a> <a href="http://www.ostools.net/qr" style="text-decoration:none;" target='_blank'>二维码</a>  <a href="http://www.ostools.net" style="text-decoration:none;" target='_blank'>更多>></a>
		      </div>
	</div>
	
	
		       <div style='margin:10px 0;'>
    	<script type="text/javascript" src="/js/ad/blog.js?date=20140301"></script>
      </div>
      </div>
<!-------------------------------------------------------->
<script type="text/javascript">
    angular.module('blogComment', ['ngSanitize'])
    .controller('ListComment', 
    function($scope, $http,$filter){
            var url = "/action/blog/listComment?blog=100290&page=1&size=10";
            $http({method: 'GET', url: url}).success(function(data) {$scope.commentjsons = data;});
            $scope.totalComment = 0;
            $scope.currentPage=1;
            $scope.pageSize=10;
            $scope.totalPage=Math.ceil($scope.totalComment/$scope.pageSize);
            if($scope.currentPage>3){
            	$scope.beginIndex = $scope.currentPage - 3;
            }else{
            	$scope.beginIndex = 1;
            }
            $scope.endIndex = $scope.beginIndex + 9;
            if($scope.endIndex>$scope.totalPage){
            	$scope.endIndex = $scope.totalPage;
            }
			var pages = new Array();
			var index=0;
			for(var i=$scope.beginIndex;i<=$scope.endIndex;i++){
				pages[index]=i;
				index++;
			}
			$scope.pages = pages;
        $scope.delete_c = function(nid,uid,cid){
        	delete_c(nid,uid,cid);
        };
        	$scope.ReplyInline = function(blog,user,relpy){
        ReplyInline(blog,user,relpy);
        };
	});
</script>
<div class='SpaceList' style='margin-top:20px;' ng-app="blogComment" ng-controller="ListComment">
<div class='BlogComments'>
  <h2><a name="comments"></a>评论<em ng-bind="totalComment"></em></h2>
  <ul id="BlogComments">
      <li ng-repeat="commentjson in commentjsons" id='cmt_{{commentjson.blogId}}_{{commentjson.userId}}_{{commentjson.commentId}}' ng-class="{'even': {{($index+1)%2}} == 0}">
	<table class='ostable'>
	<tr>
    	<td class='portrait'>
    		<a ng-href="http://my.oschina.net/u/{{commentjson.userId}}" target="_blank">
				<img ng-src="{{commentjson.portrait}}" align="absmiddle" alt="{{ commentjson.userName }}" title="{{ commentjson.userName }}" class="SmallPortrait" user="{{ commentjson.userId }}"/>
			</a>
    	</td>
    	<td class='body'>
    		<div class='title'>
    			<span ng-bind="{{(currentPage-1)*pageSize+$index+1}}"></span>楼：<a ng-href="http://my.oschina.net/u/{{commentjson.userId}}" target="_blank" name="{{ commentjson.blogId }}" class="user" ng-bind="commentjson.userName"></a>
				<span ng-if="(commentjson.client_type>10000 && commentjson.appApproved)">(<a href="{{commentjson.appUrl}}" target="_blank" title="{{commentjson.appTitle}} - {{commentjson.appDescription}}">{{commentjson.appTitle}}</a>)</span>
				<span ng-switch="{{commentjson.client_type}}">
					<span ng-if="(commentjson.client_type==2)" ">手机</span>
					<span ng-if="(commentjson.client_type==3)" ">Android</span>
					<span ng-if="(commentjson.client_type==4)" ">iPhone</span>
					<span ng-if="(commentjson.client_type==5)" ">Windows Phone</span>
					<span ng-if="(commentjson.client_type==6)" ">微信</span>
				</span>
				发表于 <span ng-bind="commentjson.create_time"></span>
				  <a href="" ng-click="delete_c(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canAdmin">删除</a>
    			  <a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit">回复此评论</a>
    		</div>
    		<div class='post' ng-bind-html="commentjson.content"></div>
    		<div id='inline_reply_of_{{commentjson.blogId}}_{{commentjson.userId}}_{{commentjson.commentId}}' class='inline_reply'></div>
        </td>
	</tr>
	</table>
</li>  </ul>
</div>
<ul class="pager">
<li class='page prev' ng-if="(currentPage>1)"><a href="?p={{currentPage-1}}#comments">&lt;</a></li><li class='page' ng-if="(beginIndex>1)"><a href="?p=1#comments">1</a></li><li class='page' ng-if="totalPage>1" ng-class="{current:{{currentPage==page}}}" ng-repeat="page in pages"><a href="?p={{page}}#comments" ng-bind="page"></a></li><li class='page' ng-if="(endIndex<totalPage"><a href="?p={{totalPage}}#comments" ng-bind="(totalPage)"></a></li><li class='page next' ng-if="(currentPage<totalPage)"><a href="?p={{currentPage+1}}#comments">&gt;</a></li></ul>
</div>
<!-------------------------------------------------------->


<div id='inline_reply_editor' style='display:none;'>
<div class="BlogCommentForm">
	<form id="form_inline_comment" action="/action/blog/add_comment?blog=100290" method="POST">
	  <input type='hidden' id='inline_reply_id' name='reply_id' value=''/>          
      <textarea name="content" id="ccom_content" style="width:650px;height:60px;" onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_inline_comment').submit();}"></textarea><br/>
	  <p>
		  <span style="float:right;">
    	  <input type="button" value="关闭" class="blg_submit_btn" id='btn_close_inline_reply' style="background: rgba(255,255,255,0);color: #555;"/>
    	  <input type="submit" value="回复" id="btn_comment" class="blg_submit_btn"/> 
		  </span>
		  插入：
				<a href="javascript:;" onclick="javascript:insert_emotions('ccom_content',this);" class="blog_emotion">表情</a>
				<a href="javascript:insert_projects_c();" class="blog_soft">开源软件</a>
		 <span class="NoData" id="ficmp_msg" style="color:#F00"></span>
	  </p>
    </form>
</div>
</div>

<div class='SpaceList' style='margin-top:20px;'>
  <a name="comments" id="postform"></a>
      <div class="BlogCommentForm">
        <form id="form_comment" action="/action/blog/add_comment?blog=100290" method="POST">
        	<div class="comment_portrait">
        		<img src="/img/portrait.gif" align="absmiddle" alt="liaoxianming" title="liaoxianming" class="LargePortrait"/>        	</div>
        	<div class="comment_form">
        		<textarea name="content" id="wmd-input" style="width:650px;height:80px;" placeholder=""></textarea>
				<p>
					<button type="submit" class="blg_submit_btn" style="float:right;">发表评论</button>
					插入：
					<a href="javascript:insert_emotions();" class="blog_emotion">表情</a>
					<a href="javascript:insert_projects();" class="blog_soft">开源软件</a>
					<span class="NoData" id="cmt_tip"></span>
				</p>
				<div id="TweetFormPopupWraper">
					<div id="TweetFormPopupArrow">
        				<div id="TweetFormPopup">
                        	<div id='TweetEmotions'>
                            	<div class='TweetPopupTitle'><a href="javascript:;" onclick="$('#TweetFormPopupWraper').hide();return false;">关闭</a>插入表情</div>
                            	                            	<a href='javascript:;' onclick='return ins_e(0);' class='emotion' style='background-position: -0px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(1);' class='emotion' style='background-position: -24px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(2);' class='emotion' style='background-position: -48px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(3);' class='emotion' style='background-position: -72px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(4);' class='emotion' style='background-position: -96px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(5);' class='emotion' style='background-position: -120px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(6);' class='emotion' style='background-position: -144px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(7);' class='emotion' style='background-position: -168px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(8);' class='emotion' style='background-position: -192px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(9);' class='emotion' style='background-position: -216px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(10);' class='emotion' style='background-position: -240px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(11);' class='emotion' style='background-position: -264px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(12);' class='emotion' style='background-position: -288px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(13);' class='emotion' style='background-position: -312px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(14);' class='emotion' style='background-position: -336px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(15);' class='emotion' style='background-position: -360px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(16);' class='emotion' style='background-position: -384px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(17);' class='emotion' style='background-position: -408px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(18);' class='emotion' style='background-position: -432px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(19);' class='emotion' style='background-position: -456px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(20);' class='emotion' style='background-position: -480px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(21);' class='emotion' style='background-position: -504px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(22);' class='emotion' style='background-position: -528px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(23);' class='emotion' style='background-position: -552px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(24);' class='emotion' style='background-position: -576px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(25);' class='emotion' style='background-position: -600px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(26);' class='emotion' style='background-position: -624px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(27);' class='emotion' style='background-position: -648px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(28);' class='emotion' style='background-position: -672px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(29);' class='emotion' style='background-position: -696px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(30);' class='emotion' style='background-position: -720px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(31);' class='emotion' style='background-position: -744px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(32);' class='emotion' style='background-position: -768px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(33);' class='emotion' style='background-position: -792px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(34);' class='emotion' style='background-position: -816px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(35);' class='emotion' style='background-position: -840px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(36);' class='emotion' style='background-position: -864px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(37);' class='emotion' style='background-position: -888px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(38);' class='emotion' style='background-position: -912px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(39);' class='emotion' style='background-position: -936px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(40);' class='emotion' style='background-position: -960px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(41);' class='emotion' style='background-position: -984px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(42);' class='emotion' style='background-position: -1008px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(43);' class='emotion' style='background-position: -1032px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(44);' class='emotion' style='background-position: -1056px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(45);' class='emotion' style='background-position: -1080px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(46);' class='emotion' style='background-position: -1104px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(47);' class='emotion' style='background-position: -1128px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(48);' class='emotion' style='background-position: -1152px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(49);' class='emotion' style='background-position: -1176px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(50);' class='emotion' style='background-position: -1200px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(51);' class='emotion' style='background-position: -1224px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(52);' class='emotion' style='background-position: -1248px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(53);' class='emotion' style='background-position: -1272px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(54);' class='emotion' style='background-position: -1296px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(55);' class='emotion' style='background-position: -1320px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(56);' class='emotion' style='background-position: -1344px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(57);' class='emotion' style='background-position: -1368px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(58);' class='emotion' style='background-position: -1392px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(59);' class='emotion' style='background-position: -1416px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(60);' class='emotion' style='background-position: -1440px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(61);' class='emotion' style='background-position: -1464px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(62);' class='emotion' style='background-position: -1488px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(63);' class='emotion' style='background-position: -1512px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(64);' class='emotion' style='background-position: -1536px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(65);' class='emotion' style='background-position: -1560px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(66);' class='emotion' style='background-position: -1584px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(67);' class='emotion' style='background-position: -1608px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(68);' class='emotion' style='background-position: -1632px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(69);' class='emotion' style='background-position: -1656px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(70);' class='emotion' style='background-position: -1680px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(71);' class='emotion' style='background-position: -1704px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(72);' class='emotion' style='background-position: -1728px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(73);' class='emotion' style='background-position: -1752px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(74);' class='emotion' style='background-position: -1776px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(75);' class='emotion' style='background-position: -1800px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(76);' class='emotion' style='background-position: -1824px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(77);' class='emotion' style='background-position: -1848px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(78);' class='emotion' style='background-position: -1872px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(79);' class='emotion' style='background-position: -1896px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(80);' class='emotion' style='background-position: -1920px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(81);' class='emotion' style='background-position: -1944px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(82);' class='emotion' style='background-position: -1968px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(83);' class='emotion' style='background-position: -1992px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(84);' class='emotion' style='background-position: -2016px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(85);' class='emotion' style='background-position: -2040px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(86);' class='emotion' style='background-position: -2064px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(87);' class='emotion' style='background-position: -2088px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(88);' class='emotion' style='background-position: -2112px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(89);' class='emotion' style='background-position: -2136px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(90);' class='emotion' style='background-position: -2160px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(91);' class='emotion' style='background-position: -2184px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(92);' class='emotion' style='background-position: -2208px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(93);' class='emotion' style='background-position: -2232px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(94);' class='emotion' style='background-position: -2256px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(95);' class='emotion' style='background-position: -2280px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(96);' class='emotion' style='background-position: -2304px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(97);' class='emotion' style='background-position: -2328px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(98);' class='emotion' style='background-position: -2352px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(99);' class='emotion' style='background-position: -2376px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(100);' class='emotion' style='background-position: -2400px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(101);' class='emotion' style='background-position: -2424px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(102);' class='emotion' style='background-position: -2448px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(103);' class='emotion' style='background-position: -2472px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(104);' class='emotion' style='background-position: -2496px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(105);' class='emotion' style='background-position: -2520px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(106);' class='emotion' style='background-position: -2544px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(107);' class='emotion' style='background-position: -2568px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(108);' class='emotion' style='background-position: -2592px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(109);' class='emotion' style='background-position: -2616px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(110);' class='emotion' style='background-position: -2640px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(111);' class='emotion' style='background-position: -2664px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(112);' class='emotion' style='background-position: -2688px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(113);' class='emotion' style='background-position: -2712px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(114);' class='emotion' style='background-position: -2736px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(115);' class='emotion' style='background-position: -2760px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(116);' class='emotion' style='background-position: -2784px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(117);' class='emotion' style='background-position: -2808px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(118);' class='emotion' style='background-position: -2832px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(119);' class='emotion' style='background-position: -2856px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(120);' class='emotion' style='background-position: -2880px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(121);' class='emotion' style='background-position: -2904px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(122);' class='emotion' style='background-position: -2928px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(123);' class='emotion' style='background-position: -2952px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(124);' class='emotion' style='background-position: -2976px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(125);' class='emotion' style='background-position: -3000px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(126);' class='emotion' style='background-position: -3024px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(127);' class='emotion' style='background-position: -3048px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(128);' class='emotion' style='background-position: -3072px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(129);' class='emotion' style='background-position: -3096px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(130);' class='emotion' style='background-position: -3120px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(131);' class='emotion' style='background-position: -3144px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(132);' class='emotion' style='background-position: -3168px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(133);' class='emotion' style='background-position: -3192px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(134);' class='emotion' style='background-position: -3216px 0px;'></a>
                            	                            	<div class='clear'></div>
                        	</div>
        				</div>
					</div>
				</div>
            </div>
        </form>
    </div>
  </div>
	
<div id="RelativeBlogs">
	<strong><a id='btn_close'>关闭</a>相关文章阅读</strong>
	<ul>
			<li>
		<span class='date'>2013/09/24</span>
		<a href="http://my.oschina.net/ljbiss/blog/163904" title="H264的CAVLC探秘">H264的CAVLC探秘</a>
	</li>
				<li>
		<span class='date'>2013/07/10</span>
		<a href="http://my.oschina.net/gysutantoman/blog/143749" title="Intel Quick Sync H264 Encoder 记录">Intel Quick Sync H264 Encoder 记录...</a>
	</li>
				<li>
		<span class='date'>2013/06/19</span>
		<a href="http://my.oschina.net/zjp35/blog/138841" title="RTP-H264封包------------实例详解">RTP-H264封包------------实例详解...</a>
	</li>
				<li>
		<span class='date'>2014/02/16</span>
		<a href="http://my.oschina.net/u/1439726/blog/200113" title="Live555接收h264使用ffmpeg解码为YUV420">Live555接收h264使用ffmpeg解码为Y...</a>
	</li>
				<li>
		<span class='date'>2014/03/10</span>
		<a href="http://my.oschina.net/u/868062/blog/206973" title="IOS ffmpeg-2.1 编译">IOS ffmpeg-2.1 编译</a>
	</li>
			</ul>
</div>
<script type="text/javascript" src="/action/visit/blog?id=100290" defer="defer"></script>
<script type="text/javascript" src="/js/syntax-highlighter-2.1.382/scripts/brush.js"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css"/>
<script type='text/javascript'><!--
$(document).ready(function(){
	SyntaxHighlighter.config.clipboardSwf = '/js/syntax-highlighter-2.1.382/scripts/clipboard.swf';
	SyntaxHighlighter.all();
});
//-->
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="/js/minmax.js"></script>
<![endif]-->
<script type='text/javascript'>
<!--
var posting = false;
var upprev_closed = false;
var upprev_hidden = true;

$(document).ready(function(){
    $('.BlogContent img').css('cursor','pointer');
    jQuery.each($('.BlogContent img'),function(idx,v){
    	$(v).wrap("<a href='"+$(this).attr('src')+"' target='_blank'></a>");
    });
	$('#form_comment').ajaxForm({
		dataType: 'json',
		bforeSubmit: function(){
			posting = true;
		},
		success: function(json) {
        	if(json.msg){
				///alert(json.msg);
				$('#cmt_tip').html("<span style='color:#C00;'>"+json.msg+"</span>");
				$('#wmd-input').focus();				
			}else{
				var url = "http://my.oschina.net/aiadaniel/blog_post?_cmt_blog="+json.blog+"&_cmt_user="+json.user+"&_cmt_id="+json.id;				
        		jQuery.get(url, function(data){
    				$('#form_comment .NoData').hide();
        			$('ul#BlogComments').append(data);
        			$('#form_comment').resetForm();
        		}); 
			}
		}
	});
	
    var at_datas = [];
    $('img.SmallPortrait').each(function(){
        var name = $(this).attr('alt');
        if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
            at_datas.push(name);
    });
    $("#form_comment textarea").atWho("@", {data: at_datas});
	$("#form_comment textarea").on("keydown",function(event){
		if((event.metaKey || event.ctrlKey) && event.keyCode==13){
			$("#form_comment").submit();
		}
	});
	$("#submiting").ajaxStart(function(){
	   if(posting){
    	   $('#btn_submit').attr("disabled","disabled");
           $(this).show();
	   }
    });
	$("#submiting").ajaxComplete(function(event,request, settings){
	   if(posting){
           $(this).hide();
    	   $('#btn_submit').attr("disabled","");
	   }
	   posting = false;
    }); 
	
    $(window).scroll(function() {
        var lastScreen;
        if ($("#postform").length > 0)
            lastScreen = getScrollY() + $(window).height() < $("#postform").offset().top * 1 ? false : true;
        else
            lastScreen = getScrollY() + $(window).height() < $(document).height() * 1 ? false : true;
        if (lastScreen && !upprev_closed) {
            $("#RelativeBlogs").stop().animate({right:"0px"});
            upprev_hidden = false;
        }
        else if (upprev_closed && getScrollY() == 0) {
            upprev_closed = false;
        }
        else if (!upprev_hidden) {
            upprev_hidden = true;
            $("#RelativeBlogs").stop().animate({right:"-400px"});
        }
    });
    $("#RelativeBlogs #btn_close").click(function() {
        $("#RelativeBlogs").stop().animate({right:"-400px"});
        upprev_closed = true;
        upprev_hidden = true;
    });
});
function delete_c(nid,uid,cid){
  if(confirm("您确认要删除此篇评论？")){
    var args = "cmt="+cid+"#"+uid+"#"+nid;
    ajax_post("/action/blog/delete_blog_comments?space=552347",args,function(){$("#cmt_"+nid+"_"+uid+"_"+cid).fadeOut();});
  }
}
var replyinline_dup = false;
function ReplyInline(blog,user,reply){
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+blog+'_'+user+'_'+reply;
	$('#inline_reply_id').val(user+'_'+reply);
	$(div_id).html($('#inline_reply_editor').html());
	$('#ccom_content').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	var li_id = '#cmt_'+blog+'_'+user+'_'+reply;
	var p_li = $(li_id);
	var tip = $("#ficmp_msg");
	$('#form_inline_comment').ajaxForm({
		dataType: 'json',
		beforeSubmit:function(){
			if(replyinline_dup){
			    tip.html("正在发表评论，请勿重复提交");
				return false;
			}
			replyinline_dup = true;
			return true;
		},
    	success: function(json) {
			tip.html("");
        	if(json.msg){                                                                                                       
				tip.html(json.msg);
				replyinline_dup = false;
        	}
        	else if(json.id){
    			ajax_post("http://my.oschina.net/blog/show_post","_cmt_user="+"&_cmt_id="+json.id,function(html){
					if(html.length > 0){
						$(html).insertAfter(p_li);
						$(div_id).empty();
					}else{
						tip.html("获取评论失败");
					}
					setTimeout(function(){
    					replyinline_dup = false;
					},5000)
				});
        	}
    	}
	});
}
function edit_catalogs(qid){
	popup("/set-catalogs?parent=1&type=3&id="+qid);
}
function vote(blogid){
		alert("必须登录后才能操作 :)");
	}
function toggle_recomm(blogid){
	ajax_post("/action/blog/toggle_recomm","id="+blogid,function(html){
		if(html == '-1')
			alert("文章不存在");
		else if(html == 0){
			$('#lnk_recomm_'+blogid).removeClass('recommend');
			$('#lnk_recomm_'+blogid).text("未推荐");
		}
		else if(html == 1){
			$('#lnk_recomm_'+blogid).addClass('recommend');
			$('#lnk_recomm_'+blogid).text("已推荐");
		}
	});
}
	var textbox = $("#wmd-input").textbox({
		maxLength: 1000,
    	onInput: function(event, status) {
			var txt = jQuery.trim($("#wmd-input").val());
    	}
	});	
	function insert_projects() {
		textbox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_projects_c() {
    	var combox = $("#ccom_content").textbox({
    		maxLength: 1000,
        	onInput: function(event, status) {
    			var txt = jQuery.trim($("#ccom_content").val());
        	}
    	});	
		combox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_emotions(id,obj) {
		if(id) {
			$('#TweetEmotions').attr('txt_id',id);
			var thiz = $(obj);
			var offset = thiz.offset();
			var poffset = thiz.offsetParent().offset();
        	var left = offset.left-poffset.left;
        	var top = offset.top-poffset.top;
			$('#TweetFormPopupWraper').css({'top':top+25 +'px','left':left+'px'});
		}
		else {
			$('#TweetFormPopupWraper').css({'top':'','left':''});
			$('#TweetEmotions').removeAttr('txt_id');
		}
		$('#TweetEmotions').show();
		$('#TweetImages').hide();
		$('#TweetFormPopupArrow').removeClass('projects');
		$('#TweetFormPopupArrow').removeClass('images');
		$('#TweetFormPopupArrow').addClass('emotions');
		$('#TweetFormPopupWraper').slideDown('fast');
	}
	function ins_e(idx){
		var txt_id = $('#TweetEmotions').attr('txt_id');
		if(!txt_id)
			textbox.insertText('['+idx+']');
		else {
			insertAtCursor(txt_id,'['+idx+']');
		}
		$('#TweetFormPopupWraper').hide();
		return false;
	}
	function insertAtCursor(tbid,str) {
		var tb = document.getElementById(tbid);
        if (document.selection){
			tb.focus();
			var r = document.selection.createRange();
            document.selection.empty();
            r.text = str;
            r.collapse();
            r.select();
        }
        else{
            var newstart = tb.selectionStart+str.length;
            tb.value=tb.value.substr(0,tb.selectionStart)+str+tb.value.substring(tb.selectionEnd);
            tb.selectionStart = newstart;
            tb.selectionEnd = newstart;
        }
	}
//-->
</script></div>
	<div class='clear'></div>
	<div id="OSC_Footer"><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width='100%'><tr>
<td align='left'>&copy; 开源中国(OsChina.NET) | <a href="http://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href='http://www.miitbeian.gov.cn/' target='_blank' style='color:#737573;text-decoration:none;'>粤ICP备12009483号-3</a></td>
<td class='oscapp'>
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class='android' title='Android客户端'>Android</a>
	<a href="http://www.oschina.net/app" class='iphone' title='iPhone 客户端'>iPhone</a>
	<a href="http://www.oschina.net/app" class='wp7' title='Windows Phone 客户端'>WP7</a>
</td>
</tr>
</table>
<script type='text/javascript'>
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>
</body>

<script type="text/javascript" src="/action/visit/space?id=552347"></script>
<script type="text/javascript" src="/js/2014/ImageTool.js?20140124"></script>
<script type='text/javascript'>
<!--
$(document).ready(function() {

	SelectStyle("#search-item",".search_list");
	$('.Tweet .photo img').live("click",function(){
		var T=$(this);
		var t=this;
		var bigImg = T.attr('bi');
		var smallImg = T.attr('si');
		var src = T.attr('src');
		var newsrc = (bigImg == src)?smallImg:bigImg;
		var imgId = T.attr('id');
		if(T.parent().attr("id") == "img_container"){
			T.parent().replaceWith(T);
			T.removeAttr("style");
			T.removeAttr("width");
			T.removeAttr("height");
		}
		if(newsrc == bigImg){
    		var loading=$('<img alt="loading" src="/img/loading.gif"/>');
			var top = T.position().top+T.height()/2-8;
			var left = T.position().left+T.width()/2-8;
			loading.css({
				'position':'absolute',
				'z-index':999,
				'top':top,
				'left':left
			});
    		T.before(loading);
			var tImg=new Image();
			tImg.src=newsrc;
			tImg.onload=function(){afterImgLoad(T,loading,imgId,newsrc,bigImg);};
		}
		else{
			T.attr("src",newsrc);
			$('#img_menu_'+imgId).remove();
		}
		return false;
	});
	
	$(".tweet_thumb_wrapper").mouseenter(function(){
		$(this).find(".tweet_play_video").css("opacity",1);
	}).mouseleave(function(){
		$(this).find(".tweet_play_video").css("opacity",0.7);
	});

    $("#TForm textarea").atWho("@", function(query, callback){
        jQuery.ajax({
            type:'POST',
            url:"/action/tweet/at_suggest",
            data:{'q':query},
            dataType:'json',
            success:function(json){
                callback(json);
            }
        });
    });
	
	toggle_tweet_video = function(id){
		$("#tweet_video_thumb_"+id).toggle();
		var video = $("#tweet_video_"+id).toggle();
		video.siblings(".tweet_video_operation,.tweet_thumb_wrapper").toggle();
	};
	
	function afterImgLoad(T,loading,imgId,url,bigImg){
		var lnks = "<div id='img_menu_"+imgId+"' class='ImgMenu'>";
		lnks += "<a href='#' onclick='$(\"#"+imgId+"\").click();return false;'>收起</a>";
		lnks += "<a href='javascript:void(0);' onclick='rotate(this,\""+imgId+"\",0);' id='rotate_btn'>旋转</a>";
		lnks += "<a href='"+bigImg+"' target='_blank'>查看原图</a></div>";			
		loading.remove();
		T.attr("src",url);
		T.before(lnks);
	}
});

function set_fellow_memo(fid,fname){
	popup("/action/ajax/set_fellow_memo","friend="+fid+"&name="+fname);
}

function deleteMsgs(uid, fid, fname){
	if(!confirm("你确认要清除与‘"+fname+"’的所有留言信息吗？"))
		return ;
	var args = "user="+uid+"&friend="+fid;
	ajax_post("/action/msg/delete_user",args,function(html){
		if(html.length > 0)
			alert(html);
		else{
			$('#Msg_'+fid).fadeOut();
		}
	});
}

function follow_user(uid, uname){
	just_follow(uid, uname,'${g_user.id}'); //oschina.js
}

function unfollow_user(uid, uname){
	if(confirm("确定不再关注" + uname + "了吗？"))
	just_unfollow(uid,'${g_user.id}',function(){
		alert('已取消对 ' + uname + ' 的关注');
	});
}

function tweet_reply(logid){
	var r = $('#LogReply_'+logid);
	if(!r.is(":hidden")){
		close_tweet_reply(logid);
		return ;
	}
	r.html("<div class='TweetRplsWrapper'><span class='loading'>正在加载评论，请稍候...</span></div>")
	r.show();
	r.load("http://my.oschina.net/aiadaniel/tweet-rpls?log="+logid,function(){
		$('#edt_tweet_post_'+logid).focus();
        var at_datas = [];
        $(this).find("img.SmallPortrait").each(function(){
            var name = $(this).attr('alt');
            if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
                at_datas.push(name);
        });
        $(this).find("input.TXT_TweetRpl_Text").atWho("@", {data: at_datas});
        $('#TweetReplyForm_'+logid).ajaxForm({
        	dataType: 'json',
			beforeSubmit: function(arr, form, options){
				$('#BTN_TweetReply_'+logid).attr('disabled','disabled');
			},
            success: function(json) {
            	if(json.msg){
        			alert(json.msg);
            	}else if(json.log){
					$('#log_reply_count_'+logid).text(json.reply_count);
        			//插入新评论					
					ajax_get("/action/ajax/get_tweet_reply?id=" + json.log,true,function(html){
						$('#LogReply_'+logid+' ul').prepend(html);
					});
					$('#edt_tweet_post_'+logid).val('');
            	}
				$('#BTN_TweetReply_'+logid).removeAttr('disabled');
            }
        });
	});
}
function close_tweet_reply(logid){
	$('#LogReply_'+logid).empty();
	$('#LogReply_'+logid).hide();
	$('#Logs .userlogs li').removeClass('hover');
}
function reply_rtweet(logid, rid, toname){
	var edtPost = $('#edt_tweet_post_' + logid);
	var old_v = edtPost.val();
	if(old_v.length > 0)
		edtPost.val(old_v + ',@'+toname+' ');
	else
		edtPost.val('回复 @'+toname+' : ');
	edtPost.focus();
	edtPost.caretPos(edtPost.val().length); }
function delete_tweet(logid){
	if(confirm("确认要删除这条信息吗？"))
	ajax_post("/action/tweet/delete?log="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0){
			var elem = $('#LI_'+logid);
			if(elem.length > 0)
				$('#LI_'+logid).fadeOut();
			else
				location.reload();
		}
	});
}
function delete_tweet_reply(logid){
	if(confirm("确认要删除这条评论吗？"))
	ajax_post("/action/tweet/delete_reply?id="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0)
			$('#TweetReply_'+logid).fadeOut();
	});
}

function delete_blog(blog_id){
    if(!confirm("文章删除后无法恢复，请确认是否删除此篇文章？")) return;
    ajax_post("/action/blog/delete?id="+blog_id+"&user=${g_user.id}&user_code=${g_user.activate_code}","",function(html){
    	location.href="http://my.oschina.net/aiadaniel/blog";
    });
}

function SelectStyle(on,option){
	var currentSort = $(on).attr('id');
	var currentText = $(option+" li."+currentSort+" a").html();
	$(on + " .text").html(currentText);
	$(on + " .text").hover(function(){
		$(this).addClass("hover")
	},function(){
		$(this).removeClass("hover")
	});
	$(option+" li a").each(function(index){
		$(this).click(function(){
			thishtml = $(this).html();
			$(on + " .text").removeClass("on").html(thishtml);		
			$(".selectbox select ").find("option").removeAttr('selected').eq(index).attr("selected","selected");	
			$(option).hide()
			return false;
		});
		
	});		
	
	$(".selectbox").click(function(){		
		$(option).toggle();
		$(on + " .text").toggleClass("on");		
		return false;
	});
	$(document).click(function(){
		$(option).hide();	
		$(on + " .text").removeClass("on");
	});
	$(document).trigger('click');

}

//-->
</script>
</html>

<!-- Generated by OsChina.NET (init:1[ms],page:118[ms],ip:139.226.4.68) -->